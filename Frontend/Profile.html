<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChopSmo - Profile</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="index.css">
    <style>
        /* Profile Page Styles */
        .profile-page {
            padding: 100px 0;
            background: linear-gradient(135deg, var(--primary-light) 0%, var(--white-color) 100%);
            min-height: 100vh;
        }

        .profile-header {
            text-align: center;
            margin-bottom: 50px;
            padding: 40px 0;
            background: var(--white-color);
            border-radius: 20px;
            box-shadow: var(--card-shadow);
        }

        .profile-header h1 {
            font-size: 42px;
            margin-bottom: 15px;
            color: var(--dark-color);
            font-weight: 700;
        }

        .profile-header p {
            color: var(--gray-color);
            font-size: 18px;
        }

        .profile-content {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 40px;
        }

        @media (max-width: 992px) {
            .profile-content {
                grid-template-columns: 1fr;
            }
        }

        /* User Card */
        .user-card {
            background: var(--white-color);
            padding: 40px;
            border-radius: 20px;
            box-shadow: var(--card-shadow);
            text-align: center;
            height: fit-content;
        }

        .avatar-section {
            margin-bottom: 30px;
        }        .avatar-preview {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            border: 4px solid var(--primary-color);
            margin: 0 auto 20px;
            overflow: hidden;
            position: relative;
            box-shadow: 0 0 0 4px rgba(76, 175, 80, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .avatar-preview:hover {
            transform: scale(1.05);
            box-shadow: 0 0 0 6px rgba(76, 175, 80, 0.2);
        }

        .avatar-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: all 0.3s ease;
        }

        .avatar-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: all 0.3s ease;
            border-radius: 50%;
        }

        .avatar-preview:hover .avatar-overlay {
            opacity: 1;
        }

        .avatar-overlay i {
            color: white;
            font-size: 24px;
        }

        .avatar-upload {
            position: relative;
            display: inline-block;
        }

        .avatar-upload input {
            display: none;
        }

        .avatar-upload label {
            background: var(--primary-gradient);
            color: var(--white-color);
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: var(--transition);
        }        .avatar-upload label:hover {
            transform: translateY(-2px);
            box-shadow: var(--button-shadow);
        }

        .avatar-info {
            font-size: 12px;
            color: var(--gray-color);
            text-align: center;
            margin-top: 8px;
            font-style: italic;
        }

        .user-info h2 {
            font-size: 24px;
            margin-bottom: 8px;
            color: var(--dark-color);
            font-weight: 600;
        }

        .user-email {
            color: var(--gray-color);
            margin-bottom: 25px;
            font-size: 14px;
        }

        .user-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .stat-item {
            background: var(--primary-light);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
        }

        .stat-number {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 12px;
            color: var(--gray-color);
            text-transform: uppercase;
            font-weight: 600;
        }

        /* Navigation Tabs */
        .profile-nav {
            background: var(--white-color);
            border-radius: 20px;
            box-shadow: var(--card-shadow);
            margin-bottom: 30px;
            overflow: hidden;
        }

        .nav-tabs {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .nav-tab {
            flex: 1;
        }

        .nav-tab button {
            width: 100%;
            padding: 20px;
            border: none;
            background: transparent;
            color: var(--gray-color);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            border-bottom: 3px solid transparent;
        }

        .nav-tab.active button {
            color: var(--primary-color);
            background: var(--primary-light);
            border-bottom-color: var(--primary-color);
        }

        .nav-tab button:hover {
            background: var(--primary-light);
            color: var(--primary-color);
        }

        /* Tab Content */
        .tab-content {
            background: var(--white-color);
            border-radius: 20px;
            box-shadow: var(--card-shadow);
            padding: 40px;
        }

        /* Recipe Search Styles */
        .recipe-search-section {
            padding: 0;
        }

        .search-header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--primary-light);
        }

        .search-header h3 {
            font-size: 28px;
            color: var(--dark-color);
            margin-bottom: 10px;
            font-weight: 700;
        }

        .search-header p {
            color: var(--gray-color);
            font-size: 16px;
        }

        .search-controls {
            margin-bottom: 30px;
        }

        .search-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            justify-content: center;
        }

        .search-tab-btn {
            padding: 12px 24px;
            border: 2px solid var(--primary-color);
            background: transparent;
            color: var(--primary-color);
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .search-tab-btn.active,
        .search-tab-btn:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        }

        .search-content {
            display: none;
        }

        .search-content.active {
            display: block;
            animation: fadeInUp 0.3s ease-out;
        }

        .search-input-group,
        .ingredients-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .search-input {
            flex: 1;
            padding: 16px 20px;
            border: 2px solid #e8f5e8;
            border-radius: 12px;
            font-size: 16px;
            font-family: 'Poppins', sans-serif;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 4px rgba(76, 175, 80, 0.1);
        }

        .search-button {
            padding: 16px 24px;
            background: var(--primary-gradient);
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            min-width: 140px;
            justify-content: center;
        }

        .search-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.3);
        }

        .filters-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            padding: 20px;
            background: var(--primary-light);
            border-radius: 15px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .filter-group label {
            font-weight: 600;
            color: var(--dark-color);
            font-size: 14px;
        }

        .filter-select {
            padding: 12px 16px;
            border: 2px solid #e8f5e8;
            border-radius: 8px;
            font-family: 'Poppins', sans-serif;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .ingredients-help {
            color: var(--gray-color);
            font-size: 14px;
            font-style: italic;
            text-align: center;
        }

        .loading-state {
            text-align: center;
            padding: 40px 20px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--primary-light);
        }

        .results-header h4 {
            font-size: 24px;
            color: var(--dark-color);
            font-weight: 700;
        }

        .results-count {
            background: var(--primary-color);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }

        .recipe-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .recipe-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .recipe-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .recipe-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            background: var(--primary-light);
        }

        .recipe-content {
            padding: 20px;
        }

        .recipe-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--dark-color);
            margin-bottom: 8px;
            line-height: 1.3;
        }        .recipe-description {
            color: var(--gray-color);
            font-size: 14px;
            line-height: 1.5;
            margin-bottom: 15px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .recipe-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 12px;
            color: var(--gray-color);
        }

        .recipe-tags {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
        }        .recipe-tag {
            background: var(--primary-light);
            color: var(--primary-color);
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
        }

        .recipe-tag.category {
            background: #e3f2fd;
            color: #1976d2;
        }

        /* Enhanced recipe card styles */
        .recipe-image-container {
            position: relative;
            overflow: hidden;
        }

        .missing-ingredients-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 87, 34, 0.9);
            color: white;
            padding: 6px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 4px;
            backdrop-filter: blur(10px);
        }

        .missing-ingredients-badge i {
            font-size: 10px;
        }

        .recipe-message {
            color: var(--primary-color);
            font-size: 13px;
            font-style: italic;
            margin-bottom: 10px;
            padding: 8px 12px;
            background: var(--primary-light);
            border-radius: 8px;
            border-left: 3px solid var(--primary-color);
        }

        .recipe-timing {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .recipe-timing span {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .recipe-timing i {
            font-size: 11px;
            opacity: 0.7;
        }

        /* Loading and error states */
        .error-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--gray-color);
        }

        .error-state i {
            font-size: 48px;
            color: #ff5722;
            margin-bottom: 20px;
        }

        .error-state h4 {
            font-size: 24px;
            margin-bottom: 10px;
            color: var(--dark-color);
        }

        .retry-btn {
            background: var(--primary-color);
            color: var(--white-color);
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            margin-top: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .retry-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .no-results {
            text-align: center;
            padding: 60px 20px;
            color: var(--gray-color);
        }

        .no-results i {
            font-size: 48px;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .no-results h4 {
            font-size: 24px;
            margin-bottom: 10px;
        }

        /* Desktop Form Styles */
        .form-section {
            background: var(--white-color);
            padding: 30px;
            border-radius: 15px;
            box-shadow: var(--card-shadow);
            margin-bottom: 30px;
        }

        .form-section h3 {
            font-size: 24px;
            margin-bottom: 25px;
            color: var(--dark-color);
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--primary-light);
        }

        .form-section h3 i {
            color: var(--primary-color);
            font-size: 20px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark-color);
            font-size: 14px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e8f5e8;
            border-radius: 8px;
            font-size: 14px;
            font-family: 'Poppins', sans-serif;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .button-group {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e8f5e8;
        }

        .btn-save,
        .btn-cancel {
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Poppins', sans-serif;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-save {
            background: var(--primary-gradient);
            color: white;
            border: none;
        }

        .btn-save:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .btn-cancel {
            background: transparent;
            color: var(--gray-color);
            border: 2px solid #e0e0e0;
        }

        .btn-cancel:hover {
            background: #f5f5f5;
            border-color: #ccc;
        }

        /* Desktop Preferences Styles */
        .preferences-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
        }

        .preference-card {
            background: var(--white-color);
            padding: 25px;
            border-radius: 15px;
            box-shadow: var(--card-shadow);
            border: 1px solid #e8f5e8;
        }

        .preference-card h4 {
            font-size: 18px;
            margin-bottom: 20px;
            color: var(--dark-color);
            font-weight: 700;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px;
            border-radius: 8px;
            transition: background-color 0.3s ease;
        }

        .checkbox-group:hover {
            background: var(--primary-light);
        }

        .checkbox-group input[type="checkbox"] {
            margin-right: 12px;
            accent-color: var(--primary-color);
        }

        .checkbox-group label {
            font-size: 14px;
            color: var(--dark-color);
            cursor: pointer;
            flex: 1;
        }

        /* Desktop Delete Account Styles */
        .delete-account {
            background: #fff5f5;
            border: 2px solid #ffebee;
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
        }

        .delete-account h4 {
            color: #d32f2f;
            font-size: 20px;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .delete-account p {
            color: #666;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .btn-danger {
            background: linear-gradient(135deg, #f44336, #d32f2f);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Poppins', sans-serif;
        }

        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(244, 67, 54, 0.3);
        }

        @media (max-width: 768px) {
            /* Professional Mobile Profile Layout */
            .profile-page {
                padding: 90px 0 60px;
                background: linear-gradient(180deg, var(--primary-light) 0%, #f8fffe 20%, var(--white-color) 100%);
            }

            .profile-header {
                margin-bottom: 40px;
                padding: 30px 20px;
                border-radius: 20px;
                background: var(--white-color);
                box-shadow: 0 8px 32px rgba(27,94,32,0.08);
                border: 1px solid rgba(76, 175, 80, 0.1);
            }

            .profile-header h1 {
                font-size: 32px;
                margin-bottom: 12px;
                font-weight: 700;
                letter-spacing: -0.5px;
            }

            .profile-header p {
                font-size: 17px;
                color: var(--gray-color);
                font-weight: 400;
                line-height: 1.5;
            }

            .profile-content {
                grid-template-columns: 1fr;
                gap: 25px;
                max-width: 100%;
            }

            /* Professional User Card Mobile */
            .user-card {
                padding: 35px 25px;
                border-radius: 20px;
                order: -1;
                background: linear-gradient(135deg, var(--white-color) 0%, #f9fffe 100%);
                box-shadow: 0 8px 32px rgba(27,94,32,0.08);
                border: 1px solid rgba(76, 175, 80, 0.1);
                margin-bottom: 20px;
            }

            .avatar-preview {
                width: 110px;
                height: 110px;
                margin-bottom: 20px;
                border: 3px solid var(--primary-color);
                box-shadow: 0 8px 24px rgba(76, 175, 80, 0.15);
            }

            .avatar-upload label {
                padding: 12px 24px;
                font-size: 15px;
                border-radius: 25px;
                font-weight: 600;
                box-shadow: 0 4px 16px rgba(76, 175, 80, 0.25);
            }

            .user-info h2 {
                font-size: 24px;
                margin-bottom: 8px;
                font-weight: 700;
                letter-spacing: -0.3px;
            }

            .user-email {
                font-size: 14px;
                margin-bottom: 25px;
                color: var(--gray-color);
                opacity: 0.8;
            }

            .user-stats {
                gap: 20px;
                margin-top: 25px;
            }

            .stat-item {
                padding: 20px 15px;
                border-radius: 16px;
                background: linear-gradient(135deg, var(--primary-light) 0%, rgba(76, 175, 80, 0.05) 100%);
                border: 1px solid rgba(76, 175, 80, 0.1);
            }

            .stat-number {
                font-size: 22px;
                font-weight: 800;
                margin-bottom: 4px;
            }

            .stat-label {
                font-size: 12px;
                font-weight: 600;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }

            /* Professional Navigation Tabs Mobile */
            .profile-nav {
                border-radius: 20px;
                margin-bottom: 25px;
                overflow: hidden;
                box-shadow: 0 6px 24px rgba(27,94,32,0.08);
                border: 1px solid rgba(76, 175, 80, 0.1);
                background: var(--white-color);
            }

            .nav-tabs {
                display: flex;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                scrollbar-width: none;
                -ms-overflow-style: none;
                padding: 8px;
                gap: 4px;
            }

            .nav-tabs::-webkit-scrollbar {
                display: none;
            }

            .nav-tab {
                flex: 0 0 auto;
                min-width: 140px;
            }

            .nav-tab button {
                width: 100%;
                padding: 16px 20px;
                font-size: 14px;
                font-weight: 600;
                white-space: nowrap;
                border-radius: 16px;
                transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
                border: 2px solid transparent;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 8px;
            }

            .nav-tab.active button {
                background: var(--primary-gradient);
                color: white;
                box-shadow: 0 4px 16px rgba(76, 175, 80, 0.3);
                border-color: var(--primary-color);
            }

            .nav-tab button:hover:not(.active) {
                background: var(--primary-light);
                transform: translateY(-2px);
            }

            .nav-tab button i {
                font-size: 16px;
            }

            /* Professional Tab Content Mobile */
            .tab-content {
                padding: 30px 25px;
                border-radius: 20px;
                background: var(--white-color);
                box-shadow: 0 6px 24px rgba(27,94,32,0.08);
                border: 1px solid rgba(76, 175, 80, 0.1);
            }

            /* Enhanced Form Sections Mobile */
            .form-section {
                margin-bottom: 35px;
                padding: 25px 20px;
                border-radius: 16px;
                background: linear-gradient(135deg, #fafffe 0%, var(--white-color) 100%);
                border: 1px solid rgba(76, 175, 80, 0.08);
            }

            .form-section h3 {
                font-size: 22px;
                margin-bottom: 25px;
                font-weight: 700;
                color: var(--dark-color);
                display: flex;
                align-items: center;
                gap: 12px;
                padding-bottom: 15px;
                border-bottom: 2px solid var(--primary-light);
            }

            .form-section h3 i {
                font-size: 20px;
                width: 28px;
                height: 28px;
                display: flex;
                align-items: center;
                justify-content: center;
                background: var(--primary-gradient);
                color: white;
                border-radius: 8px;
                box-shadow: 0 2px 8px rgba(76, 175, 80, 0.3);
            }

            .form-row {
                grid-template-columns: 1fr;
                gap: 20px;
                margin-bottom: 25px;
            }

            .form-group {
                margin-bottom: 25px;
            }

            .form-group label {
                font-size: 15px;
                margin-bottom: 10px;
                font-weight: 600;
                color: var(--dark-color);
                display: flex;
                align-items: center;
                gap: 8px;
            }

            .form-group label i {
                color: var(--primary-color);
                font-size: 16px;
            }

            .form-group input,
            .form-group select,
            .form-group textarea {
                padding: 16px 18px;
                font-size: 16px;
                border-radius: 12px;
                border: 2px solid #e8f5e8;
                background: var(--white-color);
                transition: all 0.3s ease;
                font-family: 'Poppins', sans-serif;
            }

            .form-group input:focus,
            .form-group select:focus,
            .form-group textarea:focus {
                outline: none;
                border-color: var(--primary-color);
                box-shadow: 0 0 0 4px rgba(76, 175, 80, 0.1);
                background: #fafffe;
            }

            .form-group textarea {
                min-height: 120px;
                resize: vertical;
            }

            /* Professional Button Group Mobile */
            .button-group {
                flex-direction: column;
                gap: 15px;
                margin-top: 30px;
                padding-top: 25px;
                border-top: 2px solid var(--primary-light);
            }

            .btn-save,
            .btn-cancel {
                width: 100%;
                padding: 18px 28px;
                font-size: 16px;
                font-weight: 600;
                border-radius: 14px;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 10px;
                transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
                border: 2px solid transparent;
                text-transform: none;
                letter-spacing: 0.3px;
            }

            .btn-save {
                background: var(--primary-gradient);
                color: white;
                box-shadow: 0 6px 20px rgba(76, 175, 80, 0.25);
            }

            .btn-save:hover {
                transform: translateY(-3px);
                box-shadow: 0 8px 25px rgba(76, 175, 80, 0.35);
            }

            .btn-cancel {
                background: transparent;
                color: var(--gray-color);
                border-color: #e0e0e0;
            }

            .btn-cancel:hover {
                background: #f5f5f5;
                transform: translateY(-2px);
            }

            /* Enhanced Preferences Grid Mobile */
            .preferences-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .preference-card {
                padding: 25px 20px;
                border-radius: 16px;
                background: linear-gradient(135deg, #fafffe 0%, var(--white-color) 100%);
                border: 2px solid rgba(76, 175, 80, 0.1);
                box-shadow: 0 4px 16px rgba(27,94,32,0.05);
            }

            .preference-card h4 {
                font-size: 18px;
                margin-bottom: 16px;
                font-weight: 700;
                color: var(--dark-color);
                display: flex;
                align-items: center;
                gap: 8px;
            }

            .preference-card h4::before {
                content: '';
                width: 4px;
                height: 20px;
                background: var(--primary-gradient);
                border-radius: 2px;
            }

            .checkbox-group {
                margin-bottom: 16px;
                padding: 12px 16px;
                border-radius: 10px;
                background: rgba(76, 175, 80, 0.02);
                border: 1px solid rgba(76, 175, 80, 0.08);
                transition: all 0.3s ease;
            }

            .checkbox-group:hover {
                background: rgba(76, 175, 80, 0.05);
                border-color: rgba(76, 175, 80, 0.15);
            }

            .checkbox-group input[type="checkbox"] {
                min-width: 22px;
                min-height: 22px;
                margin-right: 12px;
                accent-color: var(--primary-color);
            }

            .checkbox-group label {
                font-size: 15px;
                font-weight: 500;
                color: var(--dark-color);
                cursor: pointer;
                display: flex;
                align-items: center;
                line-height: 1.4;
            }

            /* Professional Recipe Search Mobile */
            .recipe-search-section {
                padding: 0;
            }

            .search-header {
                margin-bottom: 30px;
                padding: 25px 20px;
                background: linear-gradient(135deg, var(--primary-light) 0%, rgba(76, 175, 80, 0.05) 100%);
                border-radius: 16px;
                border: 1px solid rgba(76, 175, 80, 0.1);
            }

            .search-header h3 {
                font-size: 24px;
                margin-bottom: 12px;
                font-weight: 700;
                color: var(--dark-color);
                display: flex;
                align-items: center;
                gap: 12px;
            }

            .search-header h3 i {
                background: var(--primary-gradient);
                color: white;
                padding: 8px;
                border-radius: 10px;
                box-shadow: 0 2px 8px rgba(76, 175, 80, 0.3);
            }

            .search-header p {
                font-size: 15px;
                color: var(--gray-color);
                line-height: 1.5;
            }

            .search-tabs {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 12px;
                margin-bottom: 25px;
            }

            .search-tab-btn {
                padding: 16px 24px;
                border-radius: 14px;
                font-size: 15px;
                font-weight: 600;
                width: 100%;
                justify-content: center;
                border: 2px solid var(--primary-color);
                background: transparent;
                color: var(--primary-color);
                transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
                display: flex;
                align-items: center;
                gap: 8px;
            }

            .search-tab-btn.active,
            .search-tab-btn:hover {
                background: var(--primary-gradient);
                color: white;
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(76, 175, 80, 0.25);
            }

            .search-input-group,
            .ingredients-input-group {
                flex-direction: column;
                gap: 12px;
                margin-bottom: 20px;
            }

            .search-input {
                padding: 16px 20px;
                font-size: 16px;
                border-radius: 12px;
                border: 2px solid #e8f5e8;
                background: var(--white-color);
                transition: all 0.3s ease;
                font-family: 'Poppins', sans-serif;
            }

            .search-input:focus {
                outline: none;
                border-color: var(--primary-color);
                box-shadow: 0 0 0 4px rgba(76, 175, 80, 0.1);
                background: #fafffe;
            }

            .search-button {
                padding: 16px 24px;
                border-radius: 12px;
                font-size: 15px;
                font-weight: 600;
                width: 100%;
                justify-content: center;
                background: var(--primary-gradient);
                color: white;
                border: none;
                box-shadow: 0 4px 16px rgba(76, 175, 80, 0.25);
                transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
            }

            .search-button:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(76, 175, 80, 0.35);
            }

            .filters-section {
                grid-template-columns: 1fr;
                gap: 18px;
                padding: 20px;
                border-radius: 16px;
                background: linear-gradient(135deg, #fafffe 0%, var(--white-color) 100%);
                border: 1px solid rgba(76, 175, 80, 0.1);
            }

            .filter-group label {
                font-size: 14px;
                font-weight: 600;
                color: var(--dark-color);
                margin-bottom: 8px;
            }

            .filter-select {
                padding: 12px 16px;
                font-size: 15px;
                border-radius: 10px;
                border: 2px solid #e8f5e8;
                background: var(--white-color);
                transition: all 0.3s ease;
                font-family: 'Poppins', sans-serif;
            }

            .filter-select:focus {
                outline: none;
                border-color: var(--primary-color);
                box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
            }

            /* Professional Recipe Grid Mobile */
            .recipe-grid {
                grid-template-columns: 1fr;
                gap: 20px;
                margin-bottom: 30px;
            }

            .recipe-card {
                border-radius: 16px;
                overflow: hidden;
                background: var(--white-color);
                box-shadow: 0 6px 24px rgba(27,94,32,0.08);
                border: 1px solid rgba(76, 175, 80, 0.1);
                transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
            }

            .recipe-card:hover {
                transform: translateY(-4px);
                box-shadow: 0 12px 32px rgba(27,94,32,0.15);
                border-color: rgba(76, 175, 80, 0.2);
            }

            .recipe-image {
                height: 180px;
                object-fit: cover;
                width: 100%;
            }

            .recipe-content {
                padding: 20px;
            }

            .recipe-title {
                font-size: 18px;
                margin-bottom: 8px;
                font-weight: 700;
                color: var(--dark-color);
                line-height: 1.3;
            }

            .recipe-description {
                font-size: 14px;
                margin-bottom: 15px;
                color: var(--gray-color);
                line-height: 1.5;
            }

            .recipe-meta {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding-top: 12px;
                border-top: 1px solid rgba(76, 175, 80, 0.1);
            }

            /* Enhanced Results Header Mobile */
            .results-header {
                flex-direction: column;
                gap: 12px;
                text-align: center;
                margin-bottom: 20px;
                padding: 20px;
                background: linear-gradient(135deg, var(--primary-light) 0%, rgba(76, 175, 80, 0.05) 100%);
                border-radius: 16px;
                border: 1px solid rgba(76, 175, 80, 0.1);
            }

            .results-header h4 {
                font-size: 20px;
                font-weight: 700;
                color: var(--dark-color);
            }

            .results-count {
                padding: 8px 16px;
                font-size: 13px;
                font-weight: 700;
                background: var(--primary-gradient);
                color: white;
                border-radius: 20px;
                display: inline-flex;
                align-items: center;
                gap: 6px;
                box-shadow: 0 2px 8px rgba(76, 175, 80, 0.3);
            }

            /* Professional Delete Account Section */
            .delete-account {
                padding: 25px 20px;
                border-radius: 16px;
                margin-top: 30px;
                background: linear-gradient(135deg, #fef7f7 0%, #fff 100%);
                border: 2px solid rgba(244, 67, 54, 0.1);
                box-shadow: 0 4px 16px rgba(244, 67, 54, 0.05);
            }

            .delete-account h4 {
                font-size: 20px;
                margin-bottom: 15px;
                color: #d32f2f;
                font-weight: 700;
                display: flex;
                align-items: center;
                gap: 10px;
            }

            .delete-account h4::before {
                content: '⚠️';
                font-size: 24px;
            }

            .delete-account p {
                font-size: 15px;
                margin-bottom: 25px;
                color: #666;
                line-height: 1.5;
            }

            .btn-danger {
                padding: 16px 28px;
                border-radius: 12px;
                font-size: 15px;
                font-weight: 600;
                background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
                color: white;
                border: none;
                box-shadow: 0 4px 16px rgba(244, 67, 54, 0.25);
                transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
                display: flex;
                align-items: center;
                gap: 8px;
            }

            .btn-danger:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(244, 67, 54, 0.35);
            }
        }

        /* Professional Small Mobile Devices */
        @media (max-width: 480px) {
            .profile-page {
                padding: 85px 0 50px;
            }

            .container {
                padding: 0 15px;
            }

            .profile-header {
                padding: 25px 18px;
                margin-bottom: 30px;
                border-radius: 18px;
            }

            .profile-header h1 {
                font-size: 28px;
                letter-spacing: -0.3px;
            }

            .profile-header p {
                font-size: 16px;
            }

            .user-card {
                padding: 30px 20px;
                border-radius: 18px;
            }

            .avatar-preview {
                width: 90px;
                height: 90px;
                margin-bottom: 18px;
            }

            .user-info h2 {
                font-size: 22px;
            }

            .user-stats {
                grid-template-columns: 1fr 1fr;
                gap: 15px;
            }

            .stat-item {
                padding: 16px 12px;
                text-align: center;
            }

            .tab-content {
                padding: 25px 18px;
                border-radius: 18px;
            }

            .form-section {
                padding: 20px 16px;
                margin-bottom: 30px;
                border-radius: 14px;
            }

            .form-section h3 {
                font-size: 20px;
                margin-bottom: 20px;
            }

            .nav-tabs {
                padding: 6px;
                gap: 3px;
            }

            .nav-tab {
                min-width: 120px;
            }

            .nav-tab button {
                padding: 14px 16px;
                font-size: 13px;
                border-radius: 14px;
            }

            .search-header {
                padding: 20px 16px;
                border-radius: 14px;
            }

            .search-header h3 {
                font-size: 22px;
            }

            .search-tabs {
                grid-template-columns: 1fr;
                gap: 10px;
            }

            .search-tab-btn {
                padding: 14px 20px;
                border-radius: 12px;
                font-size: 14px;
            }

            .form-group input,
            .form-group select,
            .form-group textarea {
                padding: 14px 16px;
                border-radius: 10px;
            }

            .btn-save,
            .btn-cancel {
                padding: 16px 24px;
                border-radius: 12px;
                font-size: 15px;
            }

            .preference-card {
                padding: 20px 16px;
                border-radius: 14px;
            }

            .recipe-card {
                border-radius: 14px;
            }

            .recipe-image {
                height: 160px;
            }

            .recipe-content {
                padding: 18px;
            }
        }

        /* Professional Touch-friendly Enhancements */
        @media (max-width: 768px) {
            /* Ensure all interactive elements meet accessibility standards */
            .nav-tab button,
            .btn-save,
            .btn-cancel,
            .btn-danger,
            .search-button,
            .search-tab-btn,
            .avatar-upload label {
                min-height: 48px;
                min-width: 48px;
                touch-action: manipulation;
                -webkit-tap-highlight-color: transparent;
                position: relative;
                overflow: hidden;
            }

            /* Add subtle animations for better feedback */
            .nav-tab button::after,
            .btn-save::after,
            .search-button::after,
            .search-tab-btn::after {
                content: '';
                position: absolute;
                top: 50%;
                left: 50%;
                width: 0;
                height: 0;
                background: rgba(255, 255, 255, 0.3);
                border-radius: 50%;
                transform: translate(-50%, -50%);
                transition: width 0.6s, height 0.6s;
                pointer-events: none;
            }

            .nav-tab button:active::after,
            .btn-save:active::after,
            .search-button:active::after,
            .search-tab-btn:active::after {
                width: 200px;
                height: 200px;
            }

            /* Improve scrollable areas */
            .nav-tabs {
                scroll-behavior: smooth;
                scroll-snap-type: x mandatory;
            }

            .nav-tab {
                scroll-snap-align: start;
            }

            /* Better focus states for accessibility */
            .form-group input:focus,
            .form-group select:focus,
            .form-group textarea:focus,
            .search-input:focus,
            .filter-select:focus {
                outline: 3px solid rgba(76, 175, 80, 0.3);
                outline-offset: 2px;
            }

            /* Optimize for one-handed use */
            .button-group {
                position: sticky;
                bottom: 20px;
                background: var(--white-color);
                padding: 20px;
                margin: 20px -25px -30px;
                border-radius: 20px 20px 0 0;
                box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.1);
                border-top: 1px solid rgba(76, 175, 80, 0.1);
            }

            /* Enhanced loading states */
            .form-group input:disabled,
            .form-group select:disabled,
            .form-group textarea:disabled {
                opacity: 0.6;
                cursor: not-allowed;
                background: #f5f5f5;
            }

            /* Improved spacing for readability */
            .form-section + .form-section {
                margin-top: 40px;
            }

            .tab-content {
                min-height: calc(100vh - 400px);
                display: flex;
                flex-direction: column;
            }

            /* Professional loading states */
            .spinner {
                width: 32px;
                height: 32px;
                border: 3px solid rgba(76, 175, 80, 0.1);
                border-top: 3px solid var(--primary-color);
                border-radius: 50%;
                animation: spin 1s linear infinite;
                margin: 0 auto 16px;
            }

            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
        }

        /* ...existing styles continue... */
    </style>
</head>
<body>
    <header>
        <div class="container">
            <nav>
                <div class="logo">
                    <a href="index.html">
                        <i class="fas fa-utensils"></i>
                        <span>ChopSmo</span>
                    </a>
                </div>
                <ul class="nav-links">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="DashBoard.html">Dashboard</a></li>
                    <li><a href="MealPlans.html">Meal Plans</a></li>
                    <li><a href="MealSuggestion.html">Suggestions</a></li>
                    <li><a href="Recipes.html">Recipes</a></li>
                </ul>
                <div class="auth-buttons">
                    <button id="logoutBtn" class="btn btn-outline">Logout</button>
                </div>
                <div class="mobile-menu-btn">
                    <i class="fas fa-bars"></i>
                </div>
            </nav>
        </div>
    </header>

    <main class="profile-page">
        <div class="container">
            <section class="profile-header">
                <h1>My Profile</h1>
                <p>Manage your account settings and preferences</p>
            </section>

            <div class="profile-content">
                <!-- User Card Sidebar -->
                <aside class="user-card">                    <div class="avatar-section">
                        <div class="avatar-preview">
                            <img src="https://via.placeholder.com/140x140?text=User" alt="Profile Picture" id="avatarImg">
                            <div class="avatar-overlay">
                                <i class="fas fa-camera"></i>
                            </div>
                        </div>
                        <div class="avatar-upload">
                            <input type="file" id="avatarInput" accept="image/jpeg,image/png,image/gif">
                            <label for="avatarInput">
                                <i class="fas fa-upload"></i> Change Photo
                            </label>
                            <p class="avatar-info">JPG, PNG or GIF. Max size 5MB</p>
                        </div>
                    </div>
                      <div class="user-info">
                        <h2 id="userName">Loading...</h2>
                        <p class="user-email" id="userEmail">loading@example.com</p>
                        
                        <div class="user-stats">
                            <div class="stat-item">
                                <div class="stat-number" id="recipesCount">0</div>
                                <div class="stat-label">Saved Recipes</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number" id="mealsPlanned">0</div>
                                <div class="stat-label">Meal Plans</div>
                            </div>
                        </div>
                    </div>
                </aside>

                <!-- Main Content -->
                <main class="profile-main">
                    <!-- Navigation Tabs -->
                    <nav class="profile-nav">
                        <ul class="nav-tabs">
                            <li class="nav-tab active">
                                <button data-tab="personal">
                                    <i class="fas fa-user"></i> Personal Info
                                </button>
                            </li>
                            <li class="nav-tab">
                                <button data-tab="preferences">
                                    <i class="fas fa-cog"></i> Preferences
                                </button>
                            </li>
                            <li class="nav-tab">
                                <button data-tab="favorites">
                                    <i class="fas fa-heart"></i> Favorites
                                </button>
                            </li>                            <li class="nav-tab">
                                <button data-tab="security">
                                    <i class="fas fa-shield-alt"></i> Security
                                </button>
                            </li>
                            <li class="nav-tab">
                                <button data-tab="recipes">
                                    <i class="fas fa-search"></i> Find Recipes
                                </button>
                            </li>
                        </ul>
                    </nav>

                    <!-- Tab Content -->
                    <div class="tab-content">                        <!-- Personal Information Tab -->
                        <div class="tab-pane active" id="personal">
                            <form id="personalInfoForm">                                <div class="form-section">
                                    <h3><i class="fas fa-user-circle"></i> Basic Information</h3>
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="firstName"><i class="fas fa-user"></i> First Name</label>
                                            <input type="text" id="firstName" name="firstName" placeholder="Enter your first name" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="lastName"><i class="fas fa-user"></i> Last Name</label>
                                            <input type="text" id="lastName" name="lastName" placeholder="Enter your last name" required>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="profileEmail"><i class="fas fa-envelope"></i> Email Address</label>
                                        <input type="email" id="profileEmail" name="email" placeholder="Enter your email address" required>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="phoneNumber"><i class="fas fa-phone"></i> Phone Number</label>
                                            <input type="tel" id="phoneNumber" name="phone_number" placeholder="Enter your phone number">
                                        </div>
                                        <div class="form-group">
                                            <label for="dob"><i class="fas fa-calendar-alt"></i> Date of Birth</label>
                                            <input type="date" id="dob" name="date_of_birth">
                                        </div>
                                    </div>
                                </div>

                                <div class="form-section">
                                    <h3><i class="fas fa-map-marker-alt"></i> Location & Preferences</h3>
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="location"><i class="fas fa-home"></i> Location</label>
                                            <input type="text" id="location" name="location" placeholder="Enter your city, country">
                                        </div>
                                        <div class="form-group">
                                            <label for="timezone"><i class="fas fa-clock"></i> Timezone</label>
                                            <select id="timezone" name="timezone">
                                                <option value="">Select your timezone</option>
                                                <option value="PST">Pacific Standard Time (PST)</option>
                                                <option value="EST">Eastern Standard Time (EST)</option>
                                                <option value="GMT">Greenwich Mean Time (GMT)</option>
                                                <option value="WAT">West Africa Time (WAT)</option>
                                                <option value="CAT">Central Africa Time (CAT)</option>
                                                <option value="EAT">East Africa Time (EAT)</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="dietaryPreferences"><i class="fas fa-utensils"></i> Dietary Preferences</label>
                                        <textarea id="dietaryPreferences" name="dietary_preferences" placeholder="Tell us about your dietary preferences, restrictions, or special requirements..." rows="3"></textarea>
                                    </div>
                                    <div class="form-group">
                                        <label for="basicIngredients"><i class="fas fa-shopping-basket"></i> Basic Ingredients You Always Have</label>
                                        <textarea id="basicIngredients" name="basic_ingredients" placeholder="List the ingredients you commonly have in your kitchen (e.g., rice, onions, garlic, oil, spices...)..." rows="3"></textarea>
                                    </div>
                                </div>                                <div class="button-group">
                                    <button type="button" class="btn btn-cancel">
                                        <i class="fas fa-times"></i> Cancel
                                    </button>
                                    <button type="submit" class="btn btn-save">
                                        <i class="fas fa-save"></i> Save Changes
                                    </button>
                                </div>
                            </form>
                        </div>

                        <!-- Preferences Tab -->
                        <div class="tab-pane" id="preferences">
                            <form id="preferencesForm">
                                <div class="form-section">
                                    <h3><i class="fas fa-utensils"></i> Dietary Preferences</h3>
                                    <div class="preferences-grid">
                                        <div class="preference-card">
                                            <h4>Diet Type</h4>
                                            <div class="checkbox-group">
                                                <input type="checkbox" id="vegetarian" name="diet" value="vegetarian">
                                                <label for="vegetarian">Vegetarian</label>
                                            </div>
                                            <div class="checkbox-group">
                                                <input type="checkbox" id="vegan" name="diet" value="vegan">
                                                <label for="vegan">Vegan</label>
                                            </div>
                                            <div class="checkbox-group">
                                                <input type="checkbox" id="keto" name="diet" value="keto">
                                                <label for="keto">Keto</label>
                                            </div>
                                            <div class="checkbox-group">
                                                <input type="checkbox" id="paleo" name="diet" value="paleo">
                                                <label for="paleo">Paleo</label>
                                            </div>
                                        </div>

                                        <div class="preference-card">
                                            <h4>Allergies</h4>
                                            <div class="checkbox-group">
                                                <input type="checkbox" id="nuts" name="allergies" value="nuts">
                                                <label for="nuts">Tree Nuts</label>
                                            </div>
                                            <div class="checkbox-group">
                                                <input type="checkbox" id="dairy" name="allergies" value="dairy">
                                                <label for="dairy">Dairy</label>
                                            </div>
                                            <div class="checkbox-group">
                                                <input type="checkbox" id="gluten" name="allergies" value="gluten">
                                                <label for="gluten">Gluten</label>
                                            </div>
                                            <div class="checkbox-group">
                                                <input type="checkbox" id="shellfish" name="allergies" value="shellfish">
                                                <label for="shellfish">Shellfish</label>
                                            </div>
                                        </div>

                                        <div class="preference-card">
                                            <h4>Cuisine Preferences</h4>
                                            <div class="checkbox-group">
                                                <input type="checkbox" id="italian" name="cuisine" value="italian">
                                                <label for="italian">Italian</label>
                                            </div>
                                            <div class="checkbox-group">
                                                <input type="checkbox" id="asian" name="cuisine" value="asian">
                                                <label for="asian">Asian</label>
                                            </div>
                                            <div class="checkbox-group">
                                                <input type="checkbox" id="mexican" name="cuisine" value="mexican">
                                                <label for="mexican">Mexican</label>
                                            </div>
                                            <div class="checkbox-group">
                                                <input type="checkbox" id="african" name="cuisine" value="african" checked>
                                                <label for="african">African</label>
                                            </div>
                                        </div>

                                        <div class="preference-card">
                                            <h4>Cooking Settings</h4>
                                            <div class="form-group">
                                                <label for="skillLevel">Cooking Skill Level</label>
                                                <select id="skillLevel" name="skillLevel">
                                                    <option value="beginner">Beginner</option>
                                                    <option value="intermediate" selected>Intermediate</option>
                                                    <option value="advanced">Advanced</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label for="maxCookTime">Max Cook Time (minutes)</label>
                                                <input type="number" id="maxCookTime" name="maxCookTime" value="60" min="15" max="180">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="button-group">
                                    <button type="button" class="btn btn-cancel">Reset</button>
                                    <button type="submit" class="btn btn-save">Save Preferences</button>
                                </div>
                            </form>
                        </div>

                        <!-- Favorites Tab -->
                        <div class="tab-pane" id="favorites">
                            <div class="form-section">
                                <h3><i class="fas fa-heart"></i> Favorite Recipes</h3>
                                <div class="recipe-grid">
                                    <!-- Sample favorite recipes -->
                                    <div class="recipe-card">
                                        <div class="recipe-image" style="background-image: url('images/Achu.jpg')"></div>
                                        <div class="recipe-info">
                                            <h4>Achu (Yellow Soup)</h4>
                                            <div class="recipe-meta">
                                                <span><i class="fas fa-clock"></i> 45 mins</span>
                                                <span><i class="fas fa-star"></i> 4.8</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="recipe-card">
                                        <div class="recipe-image" style="background-image: url('images/Ndole & Miondo.jpg')"></div>
                                        <div class="recipe-info">
                                            <h4>Ndole & Miondo</h4>
                                            <div class="recipe-meta">
                                                <span><i class="fas fa-clock"></i> 60 mins</span>
                                                <span><i class="fas fa-star"></i> 4.9</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="recipe-card">
                                        <div class="recipe-image" style="background-image: url('images/Koki.jpg')"></div>
                                        <div class="recipe-info">
                                            <h4>Koki</h4>
                                            <div class="recipe-meta">
                                                <span><i class="fas fa-clock"></i> 30 mins</span>
                                                <span><i class="fas fa-star"></i> 4.7</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Security Tab -->
                        <div class="tab-pane" id="security">
                            <form id="securityForm">
                                <div class="form-section">
                                    <h3><i class="fas fa-key"></i> Change Password</h3>
                                    <div class="form-group">
                                        <label for="currentPassword">Current Password</label>
                                        <input type="password" id="currentPassword" name="currentPassword" required>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="newPassword">New Password</label>
                                            <input type="password" id="newPassword" name="newPassword" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="confirmPassword">Confirm New Password</label>
                                            <input type="password" id="confirmPassword" name="confirmPassword" required>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-section">
                                    <h3><i class="fas fa-bell"></i> Notification Settings</h3>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="emailNotifs" name="emailNotifs" checked>
                                        <label for="emailNotifs">Email notifications for new recipes</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="mealReminders" name="mealReminders" checked>
                                        <label for="mealReminders">Meal planning reminders</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="weeklyDigest" name="weeklyDigest" checked>
                                        <label for="weeklyDigest">Weekly recipe digest</label>
                                    </div>
                                </div>

                                <div class="button-group">
                                    <button type="button" class="btn btn-cancel">Cancel</button>
                                    <button type="submit" class="btn btn-save">Update Security</button>
                                </div>
                            </form>

                            <div class="delete-account">
                                <h4>Delete Account</h4>
                                <p>Once you delete your account, there is no going back. Please be certain.</p>
                                <button type="button" class="btn-danger" onclick="confirmDeleteAccount()">
                                    Delete My Account                                </button>
                            </div>
                        </div>

                        <!-- Recipe Search Tab -->
                        <div class="tab-pane" id="recipes">
                            <div class="recipe-search-section">
                                <div class="search-header">
                                    <h3><i class="fas fa-search"></i> Find Your Perfect Recipe</h3>
                                    <p>Search through thousands of recipes or get suggestions based on your ingredients</p>
                                </div>

                                <!-- Search Controls -->
                                <div class="search-controls">
                                    <div class="search-tabs">
                                        <button class="search-tab-btn active" data-search-type="keyword">
                                            <i class="fas fa-search"></i> Search Recipes
                                        </button>
                                        <button class="search-tab-btn" data-search-type="ingredients">
                                            <i class="fas fa-carrot"></i> By Ingredients
                                        </button>
                                    </div>

                                    <!-- Keyword Search -->
                                    <div class="search-content active" id="keyword-search">
                                        <div class="search-form">
                                            <div class="search-input-group">
                                                <input type="text" id="recipe-search-input" placeholder="Search for recipes..." class="search-input">
                                                <button type="button" id="search-btn" class="search-button">
                                                    <i class="fas fa-search"></i>
                                                </button>
                                            </div>

                                            <!-- Filters -->
                                            <div class="filters-section">
                                                <div class="filter-group">
                                                    <label for="category-filter">Category:</label>
                                                    <select id="category-filter" class="filter-select">
                                                        <option value="">All Categories</option>
                                                    </select>
                                                </div>
                                                <div class="filter-group">
                                                    <label for="meal-type-filter">Meal Type:</label>
                                                    <select id="meal-type-filter" class="filter-select">
                                                        <option value="">All Meal Types</option>
                                                        <option value="breakfast">Breakfast</option>
                                                        <option value="lunch">Lunch</option>
                                                        <option value="dinner">Dinner</option>
                                                        <option value="snack">Snack</option>
                                                        <option value="dessert">Dessert</option>
                                                    </select>
                                                </div>
                                                <div class="filter-group">
                                                    <label for="tags-filter">Tags:</label>
                                                    <select id="tags-filter" class="filter-select">
                                                        <option value="">All Tags</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Ingredient Search -->
                                    <div class="search-content" id="ingredients-search">
                                        <div class="ingredients-form">
                                            <div class="ingredients-input-group">
                                                <input type="text" id="ingredients-input" placeholder="Enter ingredients separated by commas (e.g., tomato, onion, chicken)" class="search-input">
                                                <button type="button" id="ingredients-search-btn" class="search-button">
                                                    <i class="fas fa-magic"></i> Get Suggestions
                                                </button>
                                            </div>
                                            <p class="ingredients-help">Enter the ingredients you have available, and we'll suggest recipes you can make!</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Loading State -->
                                <div class="loading-state" id="loading-state" style="display: none;">
                                    <div class="spinner"></div>
                                    <p>Searching for delicious recipes...</p>
                                </div>

                                <!-- Results Section -->
                                <div class="search-results" id="search-results">
                                    <div class="results-header" id="results-header" style="display: none;">
                                        <h4>Search Results</h4>
                                        <span class="results-count" id="results-count"></span>
                                    </div>
                                    
                                    <div class="recipe-grid" id="recipe-grid">
                                        <!-- Results will be populated here -->
                                    </div>

                                    <div class="no-results" id="no-results" style="display: none;">
                                        <i class="fas fa-search"></i>
                                        <h4>No recipes found</h4>
                                        <p>Try adjusting your search terms or filters</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-about">
                    <div class="logo">
                        <i class="fas fa-utensils"></i>
                        <span>ChopSmo</span>
                    </div>
                    <p>Making meal planning simple and enjoyable in 2025.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-pinterest-p"></i></a>
                    </div>
                </div>
                <div class="footer-links">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="SignUp.html">Join</a></li>
                        <li><a href="Recipes.html">Recipes</a></li>
                        <li><a href="About.html">About</a></li>
                    </ul>
                </div>
                <div class="footer-links">
                    <h3>Support</h3>
                    <ul>
                        <li><a href="FAQ.html">FAQ</a></li>
                        <li><a href="Contact.html">Contact Us</a></li>
                        <li><a href="Privacy Policy.html">Privacy Policy</a></li>
                        <li><a href="Term Of Service.html">Terms of Service</a></li>
                    </ul>
                </div>
                <div class="footer-newsletter">
                    <h3>Newsletter</h3>
                    <p>Subscribe to get weekly recipe ideas and meal planning tips.</p>
                    <form class="newsletter-form">
                        <input type="email" placeholder="Your email address" required>
                        <button type="submit" class="btn btn-primary">Subscribe</button>
                    </form>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 ChopSmo. All rights reserved.</p>
            </div>
        </div>
    </footer>    <script src="mobile-nav.js?v=6"></script>
    <script src="Profile.js"></script>
    <script src="utils.js"></script>
    <script>
        // Tab switching functionality
        document.addEventListener('DOMContentLoaded', function() {
            const tabButtons = document.querySelectorAll('.nav-tab button');
            const tabPanes = document.querySelectorAll('.tab-pane');

            tabButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const targetTab = this.getAttribute('data-tab');
                    
                    // Remove active class from all tabs and panes
                    tabButtons.forEach(btn => btn.parentElement.classList.remove('active'));
                    tabPanes.forEach(pane => pane.classList.remove('active'));
                    
                    // Add active class to clicked tab and corresponding pane
                    this.parentElement.classList.add('active');
                    document.getElementById(targetTab).classList.add('active');
                });
            });

            // Avatar upload preview
            const avatarInput = document.getElementById('avatarInput');
            const avatarImg = document.getElementById('avatarImg');

            avatarInput.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        avatarImg.src = e.target.result;
                    };
                    reader.readAsDataURL(file);
                }
            });

            // Form submissions
            document.getElementById('personalForm').addEventListener('submit', function(e) {
                e.preventDefault();
                alert('Personal information updated successfully!');
            });

            document.getElementById('preferencesForm').addEventListener('submit', function(e) {
                e.preventDefault();
                alert('Preferences saved successfully!');
            });            document.getElementById('securityForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const newPassword = document.getElementById('newPassword').value;
                const confirmPassword = document.getElementById('confirmPassword').value;
                
                if (newPassword !== confirmPassword) {
                    alert('New passwords do not match!');
                    return;
                }
                
                alert('Security settings updated successfully!');
            });

            // Recipe search functionality
            initializeRecipeSearch();
        });        function confirmDeleteAccount() {
            if (confirm('Are you sure you want to delete your account? This action cannot be undone.')) {
                alert('Account deletion request submitted. You will receive a confirmation email.');
            }
        }            // Recipe Search Functionality
        function initializeRecipeSearch() {
            const searchTabBtns = document.querySelectorAll('.search-tab-btn');
            const searchContents = document.querySelectorAll('.search-content');
            const searchBtn = document.getElementById('search-btn');
            const ingredientsSearchBtn = document.getElementById('ingredients-search-btn');
            const loadingState = document.getElementById('loading-state');
            const searchResults = document.getElementById('search-results');
            const resultsHeader = document.getElementById('results-header');
            const resultsCount = document.getElementById('results-count');
            const recipeGrid = document.getElementById('recipe-grid');
            const noResults = document.getElementById('no-results');

            // Check if utils.js is loaded
            if (typeof RecipeAPI === 'undefined') {
                console.error('RecipeAPI not found. Using fallback functionality.');
                // Use fallback functionality for now
                initializeFallbackSearch();
                return;
            }

            // Initialize Recipe API
            const recipeAPI = new RecipeAPI('http://localhost:8000'); // Update this to your Django backend URL
            
            // Switch between search types
            searchTabBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const searchType = this.getAttribute('data-search-type');
                    
                    // Update active states
                    searchTabBtns.forEach(b => b.classList.remove('active'));
                    searchContents.forEach(c => c.classList.remove('active'));
                    
                    this.classList.add('active');
                    document.getElementById(searchType + '-search').classList.add('active');
                    
                    // Clear previous results
                    clearResults();
                });
            });

            // Keyword search
            searchBtn.addEventListener('click', performKeywordSearch);
            document.getElementById('recipe-search-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    performKeywordSearch();
                }
            });

            // Filter change handlers
            document.getElementById('category-filter').addEventListener('change', performKeywordSearch);
            document.getElementById('meal-type-filter').addEventListener('change', performKeywordSearch);
            document.getElementById('tags-filter').addEventListener('change', performKeywordSearch);

            // Ingredient search
            ingredientsSearchBtn.addEventListener('click', performIngredientSearch);
            document.getElementById('ingredients-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    performIngredientSearch();
                }
            });

            // Load filter options on page load
            loadFilterOptions();            async function performKeywordSearch() {
                const query = document.getElementById('recipe-search-input').value.trim();
                const category = document.getElementById('category-filter').value;
                const mealType = document.getElementById('meal-type-filter').value;
                const tags = document.getElementById('tags-filter').value;

                // Use FormValidator to validate search
                try {
                    FormValidator.validateSearch(query, {
                        category: category,
                        meal_type: mealType,
                        tags: tags
                    });
                } catch (error) {
                    alert(error.message);
                    return;
                }

                showLoading();

                try {
                    const filters = {};
                    if (category) filters.category = category;
                    if (mealType) filters.meal_type = mealType;
                    if (tags) filters.tags = tags;

                    const data = await recipeAPI.searchRecipes(query, filters);
                    displayResults(data.results || data, 'Search Results');
                } catch (error) {
                    console.error('Search error:', error);
                    showError('Failed to search recipes. Please try again.');
                } finally {
                    hideLoading();
                }
            }            async function performIngredientSearch() {
                const ingredientsText = document.getElementById('ingredients-input').value.trim();

                // Use FormValidator to validate and parse ingredients
                try {
                    const ingredientNames = FormValidator.validateIngredients(ingredientsText);
                    
                    showLoading();

                    const data = await recipeAPI.getRecipeSuggestions(ingredientNames);
                    displayResults(data.suggestions || data, 'Recipe Suggestions');
                } catch (error) {
                    console.error('Ingredient search error:', error);
                    if (error.message.includes('Please enter')) {
                        alert(error.message);
                    } else {
                        showError('Failed to get recipe suggestions. Please try again.');
                    }
                } finally {
                    hideLoading();
                }
            }            async function loadFilterOptions() {
                try {
                    // Load categories
                    const categories = await recipeAPI.getCategories();
                    const categorySelect = document.getElementById('category-filter');
                    categories.forEach(category => {
                        const option = document.createElement('option');
                        option.value = category.id || category.name;
                        option.textContent = category.name;
                        categorySelect.appendChild(option);
                    });

                    // Load tags
                    const tags = await recipeAPI.getTags();
                    const tagsSelect = document.getElementById('tags-filter');
                    tags.forEach(tag => {
                        const option = document.createElement('option');
                        option.value = tag.id || tag.name;
                        option.textContent = tag.name;
                        tagsSelect.appendChild(option);
                    });
                } catch (error) {
                    console.error('Error loading filter options:', error);
                    // Continue without filter options if they fail to load
                }
            }            function displayResults(recipes, title) {
                clearResults();

                if (!recipes || recipes.length === 0) {
                    RecipeDisplayUtils.showNoResults(document.getElementById('search-results'), 'No recipes found');
                    return;
                }

                resultsHeader.style.display = 'flex';
                resultsCount.textContent = `${recipes.length} recipe${recipes.length !== 1 ? 's' : ''} found`;

                recipeGrid.innerHTML = '';
                recipes.forEach(recipe => {
                    const recipeCard = RecipeDisplayUtils.createRecipeCard(recipe, openRecipeDetail);
                    recipeGrid.appendChild(recipeCard);
                });
            }            function openRecipeDetail(recipe) {
                // Navigate to recipe detail page
                const recipeId = recipe.id || recipe.pk || recipe._id;
                if (recipeId) {
                    window.location.href = `recipe-detail.html?id=${recipeId}`;
                } else {
                    console.error('Recipe ID not found:', recipe);
                    alert('Unable to open recipe details. Recipe ID is missing.');
                }
            }

            function showLoading() {
                RecipeDisplayUtils.showLoading(document.getElementById('search-results'));
            }

            function hideLoading() {
                loadingState.style.display = 'none';
            }

            function clearResults() {
                resultsHeader.style.display = 'none';
                noResults.style.display = 'none';
                recipeGrid.innerHTML = '';
            }            function showError(message) {
                RecipeDisplayUtils.showError(document.getElementById('search-results'), message);
            }
        }

        // Fallback search functionality for testing without backend
        function initializeFallbackSearch() {
            console.log('Initializing fallback search functionality...');
            
            const searchTabBtns = document.querySelectorAll('.search-tab-btn');
            const searchContents = document.querySelectorAll('.search-content');
            const searchBtn = document.getElementById('search-btn');
            const ingredientsSearchBtn = document.getElementById('ingredients-search-btn');
            const loadingState = document.getElementById('loading-state');
            const searchResults = document.getElementById('search-results');
            const resultsHeader = document.getElementById('results-header');
            const resultsCount = document.getElementById('results-count');
            const recipeGrid = document.getElementById('recipe-grid');
            const noResults = document.getElementById('no-results');

            // Mock recipe data for testing
            const mockRecipes = [
                {
                    id: 1,
                    title: "Chicken Curry",
                    description: "Delicious homemade chicken curry with aromatic spices",
                    image: "images/Chicken Chips.jpg",
                    prep_time: 30,
                    servings: 4,
                    tags: ["Spicy", "Main Course"],
                    categories: ["Dinner"]
                },
                {
                    id: 2,
                    title: "Achu (Yellow Soup)",
                    description: "Traditional Cameronian soup with palm nut and spices",
                    image: "images/Achu.jpg",
                    prep_time: 45,
                    servings: 6,
                    tags: ["Traditional", "Soup"],
                    categories: ["Dinner", "Traditional"]
                },
                {
                    id: 3,
                    title: "Ndole",
                    description: "Cameroon's national dish with groundnuts and bitter leaves",
                    image: "images/Ndole & Miondo.jpg",
                    prep_time: 60,
                    servings: 8,
                    tags: ["National Dish", "Traditional"],
                    categories: ["Dinner", "Traditional"]
                },
                {
                    id: 4,
                    title: "Eru",
                    description: "Traditional Cameronian vegetable soup",
                    image: "images/Eru.jpg",
                    prep_time: 40,
                    servings: 6,
                    tags: ["Vegetable", "Traditional"],
                    categories: ["Dinner", "Healthy"]
                },
                {
                    id: 5,
                    title: "Koki",
                    description: "Steamed bean cake wrapped in banana leaves",
                    image: "images/Koki.jpg",
                    prep_time: 90,
                    servings: 4,
                    tags: ["Vegetarian", "Traditional"],
                    categories: ["Snack", "Traditional"]
                }
            ];

            // Switch between search types
            searchTabBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const searchType = this.getAttribute('data-search-type');
                    
                    // Update active states
                    searchTabBtns.forEach(b => b.classList.remove('active'));
                    searchContents.forEach(c => c.classList.remove('active'));
                    
                    this.classList.add('active');
                    document.getElementById(searchType + '-search').classList.add('active');
                    
                    // Clear previous results
                    clearFallbackResults();
                });
            });

            // Keyword search
            if (searchBtn) {
                searchBtn.addEventListener('click', performFallbackKeywordSearch);
            }
            
            const searchInput = document.getElementById('recipe-search-input');
            if (searchInput) {
                searchInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        performFallbackKeywordSearch();
                    }
                });
            }

            // Ingredient search
            if (ingredientsSearchBtn) {
                ingredientsSearchBtn.addEventListener('click', performFallbackIngredientSearch);
            }

            const ingredientsInput = document.getElementById('ingredients-input');
            if (ingredientsInput) {
                ingredientsInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        performFallbackIngredientSearch();
                    }
                });
            }

            function performFallbackKeywordSearch() {
                console.log('Performing fallback keyword search...');
                
                const query = document.getElementById('recipe-search-input').value.trim().toLowerCase();
                const category = document.getElementById('category-filter').value;
                const mealType = document.getElementById('meal-type-filter').value;
                const tags = document.getElementById('tags-filter').value;

                showFallbackLoading();

                // Simulate API delay
                setTimeout(() => {
                    let filteredRecipes = mockRecipes;

                    // Filter by search query
                    if (query) {
                        filteredRecipes = filteredRecipes.filter(recipe => 
                            recipe.title.toLowerCase().includes(query) ||
                            recipe.description.toLowerCase().includes(query)
                        );
                    }

                    // Filter by category
                    if (category) {
                        filteredRecipes = filteredRecipes.filter(recipe => 
                            recipe.categories.some(cat => cat.toLowerCase().includes(category.toLowerCase()))
                        );
                    }

                    displayFallbackResults(filteredRecipes, 'Search Results');
                    hideFallbackLoading();
                }, 500);
            }

            function performFallbackIngredientSearch() {
                console.log('Performing fallback ingredient search...');
                
                const ingredients = document.getElementById('ingredients-input').value.trim().toLowerCase();

                if (!ingredients) {
                    alert('Please enter some ingredients');
                    return;
                }

                showFallbackLoading();

                // Simulate API delay and return some results
                setTimeout(() => {
                    // For demo, return recipes that might use common ingredients
                    const suggestions = mockRecipes.slice(0, 3).map(recipe => ({
                        ...recipe,
                        message: `You can make this with ${ingredients.split(',')[0].trim()} and other ingredients!`
                    }));

                    displayFallbackResults(suggestions, 'Recipe Suggestions');
                    hideFallbackLoading();
                }, 500);
            }

            function displayFallbackResults(recipes, title) {
                clearFallbackResults();

                if (!recipes || recipes.length === 0) {
                    noResults.style.display = 'block';
                    return;
                }

                resultsHeader.style.display = 'flex';
                resultsCount.textContent = `${recipes.length} recipe${recipes.length !== 1 ? 's' : ''} found`;

                recipeGrid.innerHTML = '';
                recipes.forEach(recipe => {
                    const recipeCard = createFallbackRecipeCard(recipe);
                    recipeGrid.appendChild(recipeCard);
                });
            }

            function createFallbackRecipeCard(recipe) {
                const card = document.createElement('div');
                card.className = 'recipe-card';
                card.style.cursor = 'pointer';
                
                // Add click handler to navigate to recipe detail
                card.onclick = () => {
                    console.log('Opening recipe detail for:', recipe.title);
                    window.location.href = `recipe-detail.html?id=${recipe.id}`;
                };

                const imageUrl = recipe.image || 'assets/default-recipe.jpg';
                const description = recipe.description || 'No description available';

                card.innerHTML = `
                    <div class="recipe-image-container">
                        <img src="${imageUrl}" alt="${recipe.title}" class="recipe-image" 
                             onerror="this.src='assets/default-recipe.jpg'">
                    </div>
                    <div class="recipe-content">
                        <h3 class="recipe-title">${recipe.title}</h3>
                        <p class="recipe-description">${description}</p>
                        
                        ${recipe.message ? `<p class="recipe-message" style="color: #4CAF50; font-style: italic; margin: 10px 0; padding: 8px; background: #E8F5E8; border-radius: 5px;">${recipe.message}</p>` : ''}
                        
                        <div class="recipe-meta">
                            <div class="recipe-tags">
                                ${(recipe.tags || []).slice(0, 3).map(tag => 
                                    `<span class="recipe-tag" style="background: #E8F5E8; color: #4CAF50; padding: 4px 8px; border-radius: 12px; font-size: 11px; margin-right: 5px;">${tag}</span>`
                                ).join('')}
                                ${(recipe.categories || []).slice(0, 2).map(category => 
                                    `<span class="recipe-tag category" style="background: #e3f2fd; color: #1976d2; padding: 4px 8px; border-radius: 12px; font-size: 11px; margin-right: 5px;">${category}</span>`
                                ).join('')}
                            </div>
                            <div class="recipe-timing">
                                ${recipe.prep_time ? `<span><i class="fas fa-clock"></i> ${recipe.prep_time}min</span>` : ''}
                                ${recipe.servings ? `<span style="margin-left: 10px;"><i class="fas fa-users"></i> ${recipe.servings}</span>` : ''}
                            </div>
                        </div>
                    </div>
                `;

                return card;
            }

            function showFallbackLoading() {
                loadingState.style.display = 'block';
                clearFallbackResults();
            }

            function hideFallbackLoading() {
                loadingState.style.display = 'none';
            }

            function clearFallbackResults() {
                resultsHeader.style.display = 'none';
                noResults.style.display = 'none';
                recipeGrid.innerHTML = '';
            }

            // Populate filter options with mock data
            const categorySelect = document.getElementById('category-filter');
            const tagsSelect = document.getElementById('tags-filter');
            
            if (categorySelect) {
                const categories = ['Dinner', 'Traditional', 'Healthy', 'Snack'];
                categories.forEach(category => {
                    const option = document.createElement('option');
                    option.value = category;
                    option.textContent = category;
                    categorySelect.appendChild(option);
                });
            }

            if (tagsSelect) {
                const tags = ['Traditional', 'Spicy', 'Vegetarian', 'National Dish'];
                tags.forEach(tag => {
                    const option = document.createElement('option');
                    option.value = tag;
                    option.textContent = tag;
                    tagsSelect.appendChild(option);
                });
            }

            console.log('Fallback search functionality initialized successfully!');
        }

        // --- Global Page Transition Animation: Blur, Colorful, Enhanced Logo & Dots ---
        function animatePageTransition(href) {
            // Create overlay
            const fadeDiv = document.createElement('div');
            fadeDiv.style.position = 'fixed';
            fadeDiv.style.top = 0;
            fadeDiv.style.left = 0;
            fadeDiv.style.width = '100vw';
            fadeDiv.style.height = '100vh';
            fadeDiv.style.background = 'rgba(255,255,255,0.7)';
            fadeDiv.style.backdropFilter = 'blur(16px) saturate(180%)';
            fadeDiv.style.webkitBackdropFilter = 'blur(16px) saturate(180%)';
            fadeDiv.style.opacity = 0;
            fadeDiv.style.zIndex = 99999;
            fadeDiv.style.transition = 'opacity 0.5s cubic-bezier(.4,0,.2,1)';
            // Add enhanced spinning logo with gradient ring and animated dots
            fadeDiv.innerHTML = `
                <div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:flex;flex-direction:column;align-items:center;">
                    <span style='display:inline-block;position:relative;width:90px;height:90px;'>
                        <span style="position:absolute;top:0;left:0;width:100%;height:100%;border-radius:50%;background:conic-gradient(var(--primary-color),#FF9800,#4CAF50,#00BCD4,#FF9800,var(--primary-color));filter:blur(2px);animation:spin 1.2s linear infinite;"></span>
                        <i class='fas fa-utensils' style='position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:48px;color:#fff;text-shadow:0 2px 16px #4CAF50,0 0 0 #fff;z-index:2;animation:spin 1.2s linear infinite reverse;'></i>
                    </span>
                    <span style='font-size:24px;color:var(--primary-color);font-weight:700;letter-spacing:1.5px;margin-top:18px;text-shadow:0 2px 12px #fff;'>Chopsmo</span>
                    <span class="loading-dots" style="display:inline-block;margin-top:18px;">
                        <span class="dot" style="display:inline-block;width:10px;height:10px;background:var(--primary-color);border-radius:50%;margin:0 3px;animation:dot-bounce 1s infinite 0s;"></span>
                        <span class="dot" style="display:inline-block;width:10px;height:10px;background:#FF9800;border-radius:50%;margin:0 3px;animation:dot-bounce 1s infinite 0.2s;"></span>
                        <span class="dot" style="display:inline-block;width:10px;height:10px;background:#00BCD4;border-radius:50%;margin:0 3px;animation:dot-bounce 1s infinite 0.4s;"></span>
                    </span>
                </div>
                <style>
                @keyframes spin{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}
                @keyframes dot-bounce{0%,80%,100%{transform:translateY(0);}40%{transform:translateY(-16px);}}
                </style>
            `;
            document.body.appendChild(fadeDiv);
            setTimeout(() => {
                fadeDiv.style.opacity = 1;
            }, 10);
            setTimeout(() => {
                window.location.href = href;
            }, 3000);
        }
        // Intercept all internal navigation links for animation
        setTimeout(() => {
            document.querySelectorAll('a[href]').forEach(link => {
                const href = link.getAttribute('href');
                if (href && !href.startsWith('http') && !href.startsWith('mailto:') && !href.startsWith('#')) {
                    link.addEventListener('click', function(e) {
                        e.preventDefault();
                        animatePageTransition(href);
                    });
                }
            });
        }, 100);
        // Use animation for programmatic navigation
        function animatedRedirect(href) {
            animatePageTransition(href);
        }    </script>

    <!-- Include Profile.js for core profile functionality -->
    <script src="Profile.js"></script>
    
    <!-- Include utils.js for recipe API functionality -->
    <script src="utils.js"></script>
    
    <!-- Recipe Search Functionality -->
    <script>
        // Recipe Search Implementation for Profile Page
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize recipe search functionality
            initializeRecipeSearch();
        });

        function initializeRecipeSearch() {
            const recipeAPI = new RecipeAPI('http://localhost:8000');
            const searchBtn = document.getElementById('search-btn');
            const ingredientsSearchBtn = document.getElementById('ingredients-search-btn');
            const searchInput = document.getElementById('recipe-search-input');
            const ingredientsInput = document.getElementById('ingredients-input');
            const searchTabs = document.querySelectorAll('.search-tab-btn');
            const loadingState = document.getElementById('loading-state');
            const searchResults = document.getElementById('search-results');
            const recipeGrid = document.getElementById('recipe-grid');
            const resultsHeader = document.getElementById('results-header');
            const resultsCount = document.getElementById('results-count');
            const noResults = document.getElementById('no-results');

            // Initialize filter options
            initializeFilters();

            // Search tab switching
            searchTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const searchType = this.getAttribute('data-search-type');
                    switchSearchTab(searchType);
                });
            });

            // Keyword search
            searchBtn.addEventListener('click', performKeywordSearch);
            
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    performKeywordSearch();
                }
            });

            // Ingredients search
            ingredientsSearchBtn.addEventListener('click', performIngredientsSearch);
            
            ingredientsInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    performIngredientsSearch();
                }
            });

            async function performKeywordSearch() {
                const query = searchInput?.value?.trim();
                const filters = {
                    category: document.getElementById('category-filter')?.value,
                    meal_type: document.getElementById('meal-type-filter')?.value,
                    tags: document.getElementById('tags-filter')?.value
                };

                if (!query && !Object.values(filters).some(f => f)) {
                    showToast('Please enter a search term or select a filter', '#f44336');
                    return;
                }

                showSearchLoading();

                try {
                    const results = await recipeAPI.searchRecipes(query, filters);
                    displaySearchResults(results.results || results, `Keyword search for "${query}"`);
                } catch (error) {
                    console.error('Search error:', error);
                    // Fallback to mock search
                    const mockResults = getMockSearchResults(query, filters);
                    displaySearchResults(mockResults, `Search results for "${query}" (Demo Mode)`);
                }
            }

            async function performIngredientsSearch() {
                const ingredientsText = ingredientsInput?.value?.trim();
                
                if (!ingredientsText) {
                    showToast('Please enter some ingredients', '#f44336');
                    return;
                }

                const ingredients = ingredientsText.split(',').map(ing => ing.trim()).filter(ing => ing);
                
                if (ingredients.length === 0) {
                    showToast('Please enter valid ingredients', '#f44336');
                    return;
                }

                showSearchLoading();

                try {
                    const results = await recipeAPI.getRecipeSuggestions(ingredients);
                    displaySearchResults(results.recipes || results, `Recipes using your ingredients`);
                } catch (error) {
                    console.error('Ingredients search error:', error);
                    // Fallback to mock search
                    const mockResults = getMockIngredientResults(ingredients);
                    displaySearchResults(mockResults, `Recipe suggestions (Demo Mode)`);
                }
            }

            function switchSearchTab(searchType) {
                // Update active tab
                searchTabs.forEach(tab => {
                    tab.classList.toggle('active', tab.getAttribute('data-search-type') === searchType);
                });

                // Update active content
                document.querySelectorAll('.search-content').forEach(content => {
                    content.classList.remove('active');
                });
                document.getElementById(`${searchType}-search`).classList.add('active');
            }

            function showSearchLoading() {
                loadingState.style.display = 'block';
                searchResults.style.display = 'none';
            }

            function hideSearchLoading() {
                loadingState.style.display = 'none';
                searchResults.style.display = 'block';
            }

            function displaySearchResults(results, title) {
                hideSearchLoading();

                if (!results || results.length === 0) {
                    resultsHeader.style.display = 'none';
                    recipeGrid.innerHTML = '';
                    noResults.style.display = 'block';
                    return;
                }

                // Show results header
                resultsHeader.style.display = 'flex';
                resultsCount.textContent = `${results.length} recipe${results.length === 1 ? '' : 's'} found`;
                noResults.style.display = 'none';

                // Clear and populate grid
                recipeGrid.innerHTML = '';
                results.forEach(recipe => {
                    const card = RecipeDisplayUtils.createRecipeCard(recipe);
                    recipeGrid.appendChild(card);
                });
            }

            async function initializeFilters() {
                try {
                    // Load categories
                    const categories = await recipeAPI.getCategories();
                    const categorySelect = document.getElementById('category-filter');
                    if (categorySelect && categories.length > 0) {
                        categories.forEach(category => {
                            const option = document.createElement('option');
                            option.value = category.name || category;
                            option.textContent = category.name || category;
                            categorySelect.appendChild(option);
                        });
                    }

                    // Load tags
                    const tags = await recipeAPI.getTags();
                    const tagsSelect = document.getElementById('tags-filter');
                    if (tagsSelect && tags.length > 0) {
                        tags.forEach(tag => {
                            const option = document.createElement('option');
                            option.value = tag.name || tag;
                            option.textContent = tag.name || tag;
                            tagsSelect.appendChild(option);
                        });
                    }
                } catch (error) {
                    console.log('Using fallback filter options');
                    initializeFallbackFilters();
                }
            }

            function initializeFallbackFilters() {
                // Fallback filter options
                const categorySelect = document.getElementById('category-filter');
                const tagsSelect = document.getElementById('tags-filter');
                
                if (categorySelect) {
                    const categories = ['Dinner', 'Traditional', 'Healthy', 'Snack', 'Breakfast', 'Lunch', 'Dessert'];
                    categories.forEach(category => {
                        const option = document.createElement('option');
                        option.value = category;
                        option.textContent = category;
                        categorySelect.appendChild(option);
                    });
                }

                if (tagsSelect) {
                    const tags = ['Traditional', 'Spicy', 'Vegetarian', 'Vegan', 'Healthy', 'Quick', 'Easy'];
                    tags.forEach(tag => {
                        const option = document.createElement('option');
                        option.value = tag;
                        option.textContent = tag;
                        tagsSelect.appendChild(option);
                    });
                }
            }

            function getMockSearchResults(query, filters) {
                const mockRecipes = [
                    {
                        id: 1,
                        title: "Chicken Curry",
                        description: "Delicious spicy chicken curry with coconut milk",
                        image: "images/Chicken Chips.jpg",
                        prep_time: 30,
                        servings: 4,
                        tags: [{name: "Spicy"}, {name: "Traditional"}],
                        categories: [{name: "Dinner"}]
                    },
                    {
                        id: 2,
                        title: "Ndole with Miondo",
                        description: "Traditional Cameroonian stew with groundnuts",
                        image: "images/Ndole & Miondo.jpg",
                        prep_time: 60,
                        servings: 6,
                        tags: [{name: "Traditional"}, {name: "Healthy"}],
                        categories: [{name: "Dinner"}]
                    },
                    {
                        id: 3,
                        title: "Eru with Plantain",
                        description: "Delicious traditional Cameroonian vegetable stew",
                        image: "images/Eru.jpg",
                        prep_time: 45,
                        servings: 4,
                        tags: [{name: "Traditional"}, {name: "Vegetarian"}],
                        categories: [{name: "Lunch"}]
                    }
                ];

                // Filter mock results based on query and filters
                return mockRecipes.filter(recipe => {
                    const matchesQuery = !query || recipe.title.toLowerCase().includes(query.toLowerCase()) ||
                                        recipe.description.toLowerCase().includes(query.toLowerCase());
                    const matchesCategory = !filters.category || recipe.categories.some(cat => 
                        (cat.name || cat).toLowerCase() === filters.category.toLowerCase());
                    const matchesTags = !filters.tags || recipe.tags.some(tag => 
                        (tag.name || tag).toLowerCase() === filters.tags.toLowerCase());

                    return matchesQuery && matchesCategory && matchesTags;
                });
            }

            function getMockIngredientResults(ingredients) {
                // Mock results based on ingredients
                const mockRecipes = [
                    {
                        id: 4,
                        title: "Quick Vegetable Stir Fry",
                        description: "Fresh vegetables stir-fried with your available ingredients",
                        image: "assets/default-recipe.jpg",
                        prep_time: 15,
                        servings: 2,
                        tags: [{name: "Quick"}, {name: "Healthy"}],
                        categories: [{name: "Lunch"}],
                        message: `Uses ingredients: ${ingredients.slice(0, 3).join(', ')}`
                    },
                    {
                        id: 5,
                        title: "Simple Soup",
                        description: "A comforting soup made with your available ingredients",
                        image: "assets/default-recipe.jpg",
                        prep_time: 25,
                        servings: 3,
                        tags: [{name: "Healthy"}, {name: "Comfort"}],
                        categories: [{name: "Dinner"}],
                        message: `Perfect for using: ${ingredients.slice(0, 2).join(', ')}`
                    }
                ];

                return mockRecipes;
            }
        }
    </script>
</body>
</html>
